# Руководство по производительности: CloudBridge Relay Client

## Рекомендуемые настройки
- Используйте быстрый локальный relay-сервер для минимальной задержки
- Установите `relay.timeout` на разумное значение (например, 30s)
- Используйте возобновление TLS-сессий, если поддерживается сервером
- Настройте параметры `rate_limiting` под вашу нагрузку

## Системные ресурсы
- Убедитесь, что достаточно файловых дескрипторов для большого числа туннелей: `ulimit -n 4096`
- Следите за использованием CPU и памяти под нагрузкой

## Логирование
- В продакшене используйте `logging.level: warn` или `error` для снижения нагрузки
- Формат `logging.format: json` облегчает парсинг логов

## Производительность туннелей
- Не запускайте слишком много туннелей в одном клиенте
- Используйте отдельные сетевые интерфейсы для высоконагруженных туннелей
- Мониторьте задержку и потери пакетов в туннелях

## Heartbeat
- Настройте интервал heartbeat (`heartbeat.interval`) под ваши требования
- Слишком частые heartbeat увеличивают нагрузку, слишком редкие — задерживают обнаружение сбоев

## TLS
- Используйте аппаратное ускорение криптографии, если доступно
- Храните CA и клиентские сертификаты в памяти (tmpfs) для ускорения доступа

## Мониторинг
- Интегрируйте с системами мониторинга (Prometheus, Grafana и др.)
- Отслеживайте количество соединений, статистику туннелей, сбои heartbeat

## Диагностика производительности
- Используйте `--verbose` и системные утилиты (`top`, `htop`, `iftop`) для поиска узких мест
- Проверяйте логи relay-сервера при медленных ответах 